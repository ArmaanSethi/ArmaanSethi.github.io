---
---
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ site.title }}</title>
  <meta name="description" content="{{ site.description }}">

  <!-- Favicon -->
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“š</text></svg>">

  <link rel="stylesheet" href="/style.css">
</head>

<body>
  <div class="container">
    <header>
      <h1><a href="/">{{ site.title }}</a></h1>
      <nav class="social-links">
        {% if site.linkedin %}<a href="https://linkedin.com/in/{{ site.linkedin }}">LinkedIn</a>{% endif %}
        {% if site.github %}<a href="https://github.com/{{ site.github }}">GitHub</a>{% endif %}
        {% if site.scholar %}<a href="https://scholar.google.com/citations?user={{ site.scholar }}">Scholar</a>{% endif
        %}
        {% if site.email %}<a href="mailto:{{ site.email }}">Email</a>{% endif %}
      </nav>
    </header>

    <p class="intro">A collection of things I find interesting.</p>

    <section>
      <h2>Reading List</h2>

      <!-- Filter buttons -->
      <div class="filters" id="filters">
        <button class="filter-btn active" data-filter="all">all</button>
        <button class="filter-btn" data-filter="paper">paper</button>
        <button class="filter-btn" data-filter="video">video</button>
        <button class="filter-btn" data-filter="blog">blog</button>
        <button class="filter-btn" data-filter="favorite">â˜…</button>
      </div>

      {% assign sorted_links = site.data.links | sort: "date" | reverse %}
      {% assign links_by_year = sorted_links | group_by_exp: "link", "link.date | date: '%Y'" %}

      {% for year_group in links_by_year %}
      <div class="year-group">
        <div class="year-label">{{ year_group.name }}</div>
        <ul class="link-list">
          {% for link in year_group.items %}
          <li class="link-item" data-type="{{ link.type }}" data-favorite="{{ link.favorite }}">
            <span class="link-title">
              {% if link.type %}<span class="link-type link-type--{{ link.type }}">{{ link.type }}</span>{% endif %}
              <a href="{{ link.url }}" target="_blank" rel="noopener">{{ link.title }}</a>
              {% if link.favorite %}<span class="favorite-star" title="Favorite">â˜…</span>{% endif %}
            </span>
            {% if link.note %}<span class="link-note">{{ link.note }}</span>{% endif %}
          </li>
          {% endfor %}
        </ul>
      </div>
      {% endfor %}
    </section>

    <footer>
      <p>Last updated {{ site.time | date: "%B %Y" }}</p>
    </footer>
  </div>

  <script>
    (function () {
      const filters = document.getElementById('filters');
      const allBtn = filters.querySelector('[data-filter="all"]');
      const filterBtns = filters.querySelectorAll('.filter-btn:not([data-filter="all"])');
      const items = document.querySelectorAll('.link-item');
      const yearGroups = document.querySelectorAll('.year-group');

      let activeFilters = new Set();

      function updateDisplay() {
        const showAll = activeFilters.size === 0;

        items.forEach(item => {
          if (showAll) {
            item.classList.remove('hidden');
            return;
          }

          const type = item.dataset.type;
          const isFavorite = item.dataset.favorite === 'true';

          let matches = false;
          if (activeFilters.has(type)) matches = true;
          if (activeFilters.has('favorite') && isFavorite) matches = true;

          item.classList.toggle('hidden', !matches);
        });

        // Hide empty year groups
        yearGroups.forEach(group => {
          const visibleItems = group.querySelectorAll('.link-item:not(.hidden)');
          group.classList.toggle('hidden', visibleItems.length === 0);
        });

        // Update button states
        allBtn.classList.toggle('active', showAll);
        filterBtns.forEach(btn => {
          btn.classList.toggle('active', activeFilters.has(btn.dataset.filter));
        });
      }

      filters.addEventListener('click', (e) => {
        const btn = e.target.closest('.filter-btn');
        if (!btn) return;

        const filter = btn.dataset.filter;

        if (filter === 'all') {
          activeFilters.clear();
        } else {
          if (activeFilters.has(filter)) {
            activeFilters.delete(filter);
          } else {
            activeFilters.add(filter);
          }
        }

        updateDisplay();
      });
    })();
  </script>
</body>

</html>